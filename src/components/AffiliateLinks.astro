---
import { gameAffiliateLinks } from "../lib/affiliates";
const { slug, onlyAffiliate = true, title = "Where to buy" } = Astro.props;
const links = gameAffiliateLinks(slug, { onlyAffiliate });
---
{links.length > 0 && (
  <aside class="mt-6 p-4 border rounded-xl">
    <h3 class="font-semibold text-lg mb-2">{title}</h3>
    <ul class="space-y-2">
      {links.map(l => (
        <li>
          <a
            class="underline"
            href={l.url}
            target="_blank"
            rel="noopener noreferrer sponsored nofollow"
            data-umami-event="affiliate-click"
            data-umami-event-game={slug}
            data-umami-event-store={l.store}
          >
            {l.label}
          </a>
        </li>
      ))}
    </ul>
    <p class="text-xs text-slate-500 mt-2">Purchases may earn us a commission at no extra cost to you.</p>
  </aside>
)}
