---
import "../../styles/global.css";
import GameDetail from "../../components/GameDetail.astro";
import { getCollection } from "astro:content";
import SiteLayout from "../../layouts/SiteLayout.astro";

export const prerender = true;

export async function getStaticPaths() {
  const games = await getCollection("games");
  return games.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry }
  }));
}

const { entry } = Astro.props;
const title = entry.data.title;
const description = entry.data.short ?? `Where to play ${entry.data.title} on PC, Deck, Switch, and beyond.`;
const ogImage = entry?.data?.coverImage ?? "/favicon.svg";
---
<SiteLayout title={title} description={description} ogImage={ogImage} ogType="article" mainClass="max-w-3xl px-6 py-10">
  <a class="text-sm text-[var(--brand-blue)] font-semibold" href="/games">‚Üê All games</a>
  <GameDetail entry={entry} />
</SiteLayout>
